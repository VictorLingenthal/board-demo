(this.webpackJsonpboard=this.webpackJsonpboard||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},54:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),s=n(8),u=n.n(s),i=(n(34),n(35),n(36),n(4)),o=n(10),d=n(7),l=n.n(d),f=n(6),h=n(5),v=n(13),j=n(27);function b(){var e=[],t=function(){var t,n=Object(j.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.apply(void 0,arguments)}}catch(a){n.e(a)}finally{n.f()}};return t.add=function(t){e=[].concat(Object(h.a)(e),[t])},t.remove=function(t){e=e.filter((function(e){return e!==t}))},t}function p(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=e,c=b(),s=Object.keys(t).reduce((function(e,a){return Object(f.a)(Object(f.a)({},e),{},Object(v.a)({},a,(function(){for(var e=arguments.length,s=new Array(e),u=0;u<e;u++)s[u]=arguments[u];var i=t[a].apply(t,[r].concat(s));r!==i&&(r=i,c(i),n&&n(i))})))}),{});return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=Object(a.useState)(e?e(r):r),u=Object(i.a)(n,2),o=u[0],d=u[1];return Object(a.useEffect)((function(){var n=function(n){var r=e?e(n):n;r!==o&&(d(r),t&&t(r))};return c.add(n),function(){c.remove(n)}}),[o]),[o,s]}}var O=p([],{deleteCard:function(e,t){return e.filter((function(e){return e.id!==t}))},addCard:function(e,t){return[t].concat(Object(h.a)(e))},addCards:function(e,t){return[].concat(Object(h.a)(t),Object(h.a)(e))},setStatus:function(e,t,n){return e.map((function(e){return e.id===t?Object(f.a)(Object(f.a)({},e),{},{status:n}):e}))},setTitle:function(e,t,n){return e.map((function(e){return e.id===t?Object(f.a)(Object(f.a)({},e),{},{title:n}):e}))},setOwner:function(e,t,n){return e.map((function(e){return e.id===t?Object(f.a)(Object(f.a)({},e),{},{owner:n}):e}))}}),m=function e(){var t=this;Object(o.a)(this,e),this.statusTypes=void 0,this.getStatusByValue=function(e){return t.statusTypes.filter((function(t){return t.value===e}))[0]},this.statusTypes=[{value:"backlog",label:"Backlog"},{value:"todo",label:"To Do"},{value:"inprogress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"won't fix",label:"Won't Fix"}]},g=function e(){var t=this;Object(o.a)(this,e),this.cards=void 0,this.dispatcher=void 0,this.statusService=void 0,this.convertServerCard=function(e){return{id:e._id,title:e.title,status:t.statusService.getStatusByValue(e.status),owner:e.owner,creator:e.creator,date:e.date}},this.getCards=function(){var e=[];l.a.get("/cards").then((function(n){e=n.data,t.dispatcher.addCards(e.map((function(e){return t.convertServerCard(e)})))})).catch((function(e){return console.log(e)}))},this.addCard=function(e){return l.a.post("/cards/add",{status:e.value}).then((function(e){return t.dispatcher.addCard(t.convertServerCard(e.data))})).catch((function(e){console.log(e)}))},this.update=function(e,t){return l.a.post("/cards/update/"+e,t).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))},this.updateStatus=function(e,n){t.dispatcher.setStatus(e,n),t.update(e,{status:n.value})},this.updateOwner=function(e,n){var r=n?n.value:null;t.dispatcher.setOwner(e,r),t.update(e,{owner:r})},this.updateTitle=function(e,n){t.dispatcher.setTitle(e,n.currentTarget.value),t.update(e,{title:n.currentTarget.value})},this.deleteCard=function(e){t.dispatcher.deleteCard(e),l.a.delete("/cards/"+e).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))};var n=O(),r=Object(i.a)(n,2),a=r[0],c=r[1];this.cards=a,this.dispatcher=c,this.statusService=new m},x=p([],{addUser:function(e,t){return[t].concat(Object(h.a)(e))},addUsers:function(e,t){return[].concat(Object(h.a)(t),Object(h.a)(e))},deleteUser:function(e,t){return e.filter((function(e){return e.id!==t}))}}),C=function e(){var t=this;Object(o.a)(this,e),this.users=void 0,this.dispatcher=void 0,this.expandUsers=function(e){return e.map((function(e){return{value:e.name,label:e.name,id:e._id}}))},this.getUsers=function(){l.a.get("/users").then((function(e){return t.dispatcher.addUsers(t.expandUsers(e.data))})).catch((function(e){return console.log(e)}))},this.addUser=function(e){return l.a.post("/users/add",{name:e}).then((function(e){return t.dispatcher.addUser(t.expandUsers([e.data]))})).catch((function(e){console.log(e)}))},this.deleteUser=function(e){return e?l.a.delete("/users/"+e).then((function(e){return t.dispatcher.deleteUser(t.expandUsers([e.data]))})).catch((function(e){console.log(e)})):null};var n=x(),r=Object(i.a)(n,2),a=r[0],c=r[1];this.users=a,this.dispatcher=c},S=(n(54),n(12)),U=function(e){var t=e.userService,n=Object(a.useState)(),c=Object(i.a)(n,2),s=c[0],u=c[1],o=Object(a.useState)(),d=Object(i.a)(o,2),l=d[0],f=d[1];return Object(r.jsxs)("header",{className:"boardHeader",children:[Object(r.jsx)("input",{placeholder:"New Username",value:s,onChange:function(e){return u(e.currentTarget.value)}}),Object(r.jsx)("button",{onClick:function(){s&&t.addUser(s),u("")},children:"Add User"}),Object(r.jsx)(S.a,{className:"deleteUser",options:t.users,value:l,placeholder:"Pick User",isClearable:!0,onChange:function(e){return f(e)}}),Object(r.jsx)("button",{onClick:function(){return t.deleteUser(l?l.id:null)},children:"Delete User"})]})},w=(n(74),n(75),n(28));var T=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},y=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],s=n[1],u=function(){return s(!c)},o=e.cardService;return Object(r.jsxs)("div",{className:"card",children:[Object(r.jsxs)("header",{children:[Object(r.jsx)(S.a,{className:"selectOwner",options:e.users,value:{value:e.model.owner,label:T(e.model.owner)},placeholder:"Owner",isClearable:!0,onChange:function(t){return o.updateOwner(e.model.id,t)}}),Object(r.jsx)(S.a,{className:"selectStatus",options:o.statusService.statusTypes,value:e.model.status,placeholder:"Status",onChange:function(t){return o.updateStatus(e.model.id,t)}})]}),Object(r.jsxs)("main",{children:[!c&&Object(r.jsx)("div",{onClick:u,children:e.model.title}),c&&Object(r.jsx)(w.a,{placeholder:"Enter Title",autoFocus:!0,value:e.model.title,onChange:function(t){return o.updateTitle(e.model.id,t)},onBlur:u})]}),Object(r.jsx)("button",{className:"deleteButton",onClick:function(){return o.deleteCard(e.model.id)},children:"X"})]})},N=function(e){return Object(r.jsxs)("div",{className:"column",children:[Object(r.jsxs)("header",{className:"columnHeader",children:[e.status.label,Object(r.jsx)("button",{onClick:function(){return e.cardService.addCard(e.status)},children:"+"})]}),Object(r.jsx)("main",{className:"columnMain",children:e.cardService.cards.filter((function(t){return t.status.value===e.status.value})).map((function(t){return Object(r.jsx)(y,{model:t,cardService:e.cardService,users:e.users},t.id)}))})]})},k=function(){var e=new g,t=new C;Object(a.useEffect)((function(){return e.getCards()}),[]),Object(a.useEffect)((function(){return t.getUsers()}),[]);var n=e.statusService.statusTypes.map((function(n){return Object(r.jsx)(N,{status:n,users:t.users,cardService:e},n.label)}));return Object(r.jsxs)("div",{className:"board",children:[Object(r.jsx)(U,{userService:t}),Object(r.jsx)("main",{className:"boardmain",children:n})]})};var B=function(){return Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(k,{})})},F=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};u.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(B,{})}),document.getElementById("root")),F()}},[[76,1,2]]]);
//# sourceMappingURL=main.c589199c.chunk.js.map