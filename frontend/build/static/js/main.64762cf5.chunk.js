(this.webpackJsonpboard=this.webpackJsonpboard||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},54:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n(0),c=n.n(a),u=n(8),s=n.n(u),i=(n(34),n(35),n(5)),o=(n(36),n(6)),d=n(4),l=n(13),f=n(27);function h(){var e=[],t=function(){var t,n=Object(f.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.apply(void 0,arguments)}}catch(a){n.e(a)}finally{n.f()}};return t.add=function(t){e=[].concat(Object(d.a)(e),[t])},t.remove=function(t){e=e.filter((function(e){return e!==t}))},t}function j(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=e,c=h(),u=Object.keys(t).reduce((function(e,a){return Object(o.a)(Object(o.a)({},e),{},Object(l.a)({},a,(function(){for(var e=arguments.length,u=new Array(e),s=0;s<e;s++)u[s]=arguments[s];var i=t[a].apply(t,[r].concat(u));r!==i&&(r=i,c(i),n&&n(i))})))}),{});return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=Object(a.useState)(e?e(r):r),s=Object(i.a)(n,2),o=s[0],d=s[1];return Object(a.useEffect)((function(){var n=function(n){var r=e?e(n):n;r!==o&&(d(r),t&&t(r))};return c.add(n),function(){c.remove(n)}}),[o]),[o,u]}}var b=j([],{deleteCard:function(e,t){return e.filter((function(e){return e.id!==t}))},addCard:function(e,t){return[t].concat(Object(d.a)(e))},addCards:function(e,t){return[].concat(Object(d.a)(t),Object(d.a)(e))},setStatus:function(e,t,n){return e.map((function(e){return e.id===t?Object(o.a)(Object(o.a)({},e),{},{status:n}):e}))},setTitle:function(e,t,n){return e.map((function(e){return e.id===t?Object(o.a)(Object(o.a)({},e),{},{title:n}):e}))},setOwner:function(e,t,n){return e.map((function(e){return e.id===t?Object(o.a)(Object(o.a)({},e),{},{owner:n}):e}))}}),v=j([],{addUser:function(e,t){return[t].concat(Object(d.a)(e))},addUsers:function(e,t){return[].concat(Object(d.a)(t),Object(d.a)(e))},deleteUser:function(e,t){return e.filter((function(e){return e.id!==t}))}}),O=n(10),p=n(7),m=n.n(p),g=function e(){var t=this;Object(O.a)(this,e),this.statusTypes=void 0,this.getStatusByValue=function(e){return t.statusTypes.filter((function(t){return t.value===e}))[0]},this.statusTypes=[{value:"backlog",label:"Backlog"},{value:"todo",label:"To Do"},{value:"inprogress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"won't fix",label:"Won't Fix"}]},x=function e(t){var n=this;Object(O.a)(this,e),this.statusService=void 0,this.dispatcher=void 0,this.titleTimeouts=void 0,this.convertServerCard=function(e){return{id:e._id,title:e.title,status:n.statusService.getStatusByValue(e.status),owner:e.owner,creator:e.creator,date:e.date}},this.getCards=function(){console.log("GetCards"),m.a.get("/cards").then((function(e){return n.dispatcher.addCards(e.data.map((function(e){return n.convertServerCard(e)})))})).catch((function(e){return console.log(e)}))},this.addCard=function(e){return m.a.post("/cards/add",{status:e.value}).then((function(e){return n.dispatcher.addCard(n.convertServerCard(e.data))})).catch((function(e){return console.log(e)}))},this.update=function(e,t){return m.a.post("/cards/update/"+e,t).then((function(e){return console.log(e)})).catch((function(e){return console.log(e)}))},this.updateStatus=function(e,t){return n.dispatcher.setStatus(e,t),n.update(e,{status:t.value})},this.updateOwner=function(e,t){var r=t?t.value:null;return n.dispatcher.setOwner(e,r),n.update(e,r)},this.updateTitle=function(e,t,r){var a=n.titleTimeouts.filter((function(t){return t.id===e}))[0],c=function(){return setTimeout((function(){return n.titleTimeouts=n.titleTimeouts.filter((function(t){return!(t.id===e)})),n.update(e,r)}),2e3)};if(a)clearTimeout(a.timeout),a.timeout=c();else{var u={id:e,oldTitle:t,timeout:c()};n.titleTimeouts=[u].concat(Object(d.a)(n.titleTimeouts))}n.dispatcher.setTitle(e,r)},this.deleteCard=function(e){return m.a.delete("/cards/"+e).then((function(){return n.dispatcher.deleteCard(e)})).catch((function(e){return console.log(e)}))},this.statusService=new g,this.dispatcher=t,this.titleTimeouts=[]},C=function e(t){var n=this;Object(O.a)(this,e),this.dispatcher=void 0,this.expandUsers=function(e){return e.map((function(e){return{value:e.name,label:e.name,id:e._id}}))},this.getUsers=function(){return m.a.get("/users").then((function(e){return n.dispatcher.addUsers(n.expandUsers(e.data))})).catch((function(e){return console.log(e)}))},this.addUser=function(e){return m.a.post("/users/add",{name:e}).then((function(e){return n.dispatcher.addUser(n.expandUsers([e.data]))})).catch((function(e){console.log(e)}))},this.deleteUser=function(e){return e?m.a.delete("/users/"+e).then((function(t){return n.dispatcher.deleteUser(e)})).catch((function(e){console.log(e)})):null},this.dispatcher=t},S=(n(54),n(12)),T=function(e){var t=e.userService,n=Object(a.useState)(),c=Object(i.a)(n,2),u=c[0],s=c[1],o=Object(a.useState)(),d=Object(i.a)(o,2),l=d[0],f=d[1];return Object(r.jsxs)("header",{className:"boardHeader",children:[Object(r.jsx)("input",{placeholder:"New Username",value:u,onChange:function(e){return s(e.currentTarget.value)}}),Object(r.jsx)("button",{onClick:function(){u&&t.addUser(u),s("")},children:"Add User"}),Object(r.jsx)(S.a,{className:"deleteUser",options:e.users,value:l,placeholder:"Pick User",isClearable:!0,onChange:function(e){return f(e)}}),Object(r.jsx)("button",{onClick:function(){return t.deleteUser(l?l.id:"")},children:"Delete User"})]})},U=(n(74),n(75),n(28));var w,y,N=function(e){return"string"!==typeof e?"":e.charAt(0).toUpperCase()+e.slice(1)},k=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),c=n[0],u=n[1],s=Object(a.useState)(!1),o=Object(i.a)(s,2),d=o[0],l=o[1],f=function(){return u(!c)},h=e.cardService;return Object(r.jsxs)("div",{className:"card ".concat(d?"deletePending":""),children:[Object(r.jsxs)("header",{children:[Object(r.jsx)(S.a,{className:"selectOwner",options:e.users,value:{value:e.model.owner,label:N(e.model.owner)},placeholder:"Owner",isClearable:!0,onChange:function(t){return h.updateOwner(e.model.id,t)}}),Object(r.jsx)(S.a,{className:"selectStatus",options:h.statusService.statusTypes,value:e.model.status,placeholder:"Status",onChange:function(t){return h.updateStatus(e.model.id,t)}})]}),Object(r.jsxs)("main",{children:[!c&&Object(r.jsx)("div",{onClick:f,children:e.model.title}),c&&Object(r.jsx)(U.a,{placeholder:"Enter Title",autoFocus:!0,value:e.model.title,onChange:function(t){return h.updateTitle(e.model.id,e.model.title,t.currentTarget.value)},onBlur:f})]}),Object(r.jsx)("button",{className:"deleteButton",onClick:function(){l(!0),h.deleteCard(e.model.id).catch((function(e){return console.log(e)})).finally((function(){return l(!1)}))},children:"X"})]})},B=function(e){return Object(r.jsxs)("div",{className:"column",children:[Object(r.jsxs)("header",{className:"columnHeader",children:[e.status.label,Object(r.jsx)("button",{onClick:function(){return e.cardService.addCard(e.status)},children:"+"})]}),Object(r.jsx)("main",{className:"columnMain",children:e.cards.filter((function(t){return t.status.value===e.status.value})).map((function(t){return Object(r.jsx)(k,{model:t,cardService:e.cardService,users:e.users},t.id)}))})]})},F=function(){var e=b(),t=Object(i.a)(e,2),n=t[0],c=t[1],u=v(),s=Object(i.a)(u,2),o=s[0],d=s[1];Object(a.useEffect)((function(){w=new x(c),y=new C(d),w.getCards(),y.getUsers()}),[]);var l=w?w.statusService.statusTypes.map((function(e){return Object(r.jsx)(B,{status:e,users:o,cards:n,cardService:w},e.label)})):"Loading";return Object(r.jsxs)("div",{className:"board",children:[y&&Object(r.jsx)(T,{users:o,userService:y}),Object(r.jsx)("main",{className:"boardmain",children:l})]})};var P=function(){return Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(F,{})})})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,77)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,u=t.getTTFB;n(e),r(e),a(e),c(e),u(e)}))};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(P,{})}),document.getElementById("root")),A()}},[[76,1,2]]]);
//# sourceMappingURL=main.64762cf5.chunk.js.map