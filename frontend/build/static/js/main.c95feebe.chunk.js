(this.webpackJsonpboard=this.webpackJsonpboard||[]).push([[0],{103:function(t,e,n){},104:function(t,e,n){},105:function(t,e,n){"use strict";n.r(e);var a=n(5),r=n(2),c=n.n(r),u=n(26),i=n.n(u),o=(n(73),n(74),n(75),n(28)),s=n(63),l=function(){function t(){var e=this;Object(o.a)(this,t),this.statusTypes=void 0,this.getStatusByValue=function(t){return e.statusTypes.filter((function(e){return e.value===t}))[0]},this.statusTypes=[{value:"backlog",label:"Backlog"},{value:"todo",label:"To Do"},{value:"inprogress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"won't fix",label:"Won't Fix"}]}return Object(s.a)(t,null,[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),t}();l.instance=void 0;var d=n(16),f=n(10),b=n(20),j=new b.ApolloClient({cache:new b.InMemoryCache({addTypename:!1}),uri:"/graphql"}),v=n(19),O=n(39),h=n(66);function m(){var t=[],e=function(){var e,n=Object(h.a)(t);try{for(n.s();!(e=n.n()).done;){var a=e.value;a.apply(void 0,arguments)}}catch(r){n.e(r)}finally{n.f()}};return e.add=function(e){t=[].concat(Object(v.a)(t),[e])},e.remove=function(e){t=t.filter((function(t){return t!==e}))},e}function p(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=t,c=m(),u=Object.keys(e).reduce((function(t,r){return Object(d.a)(Object(d.a)({},t),{},Object(O.a)({},r,(function(){for(var t=arguments.length,u=new Array(t),i=0;i<t;i++)u[i]=arguments[i];var o=e[r].apply(e,[a].concat(u));a!==o&&(a=o,c(o),n&&n(o))})))}),{});return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=Object(r.useState)(t?t(a):a),i=Object(f.a)(n,2),o=i[0],s=i[1];return Object(r.useEffect)((function(){var n=function(n){var a=t?t(n):n;a!==o&&(s(a),e&&e(a))};return c.add(n),function(){c.remove(n)}}),[o]),[o,u]}}var g=p([],{deleteCard:function(t,e){return t.filter((function(t){return t.id!==e}))},addCard:function(t,e){return[e].concat(Object(v.a)(t))},addCards:function(t,e){return[].concat(Object(v.a)(e),Object(v.a)(t))},setStatus:function(t,e,n){return t.map((function(t){return t.id===e?Object(d.a)(Object(d.a)({},t),{},{status:n}):t}))},setTitle:function(t,e,n){return t.map((function(t){return t.id===e?Object(d.a)(Object(d.a)({},t),{},{title:n}):t}))},setOwner:function(t,e,n){return t.map((function(t){return t.id===e?Object(d.a)(Object(d.a)({},t),{},{owner:n}):t}))}}),C=p([],{addUser:function(t,e){return[e].concat(Object(v.a)(t))},addUsers:function(t,e){return[].concat(Object(v.a)(e),Object(v.a)(t))},deleteUser:function(t,e){return t.filter((function(t){return t.id!==e}))}}),x=n(23);function T(){var t=Object(x.a)(["\n        mutation DeleteCard($id: ID) {\n          deleteCard(id: $id)\n        }"]);return T=function(){return t},t}function w(){var t=Object(x.a)(["\n        mutation UpdateCard($id: ID, $card:CardInput) {\n          updateCard(id: $id, card:$card) {\n            title\n            id\n            status\n            owner\n            creator\n            date\n          }\n        }"]);return w=function(){return t},t}function U(){var t=Object(x.a)(["\n          mutation AddCard($status: String) {\n            addCard(status: $status) {\n              title\n              id\n              status\n              owner\n              creator\n              date\n            }\n          }"]);return U=function(){return t},t}function y(){var t=Object(x.a)(["{\n            cards {\n              title\n              id\n              status\n              owner\n              creator\n              date\n            }\n          }"]);return y=function(){return t},t}var S=function t(e){var n=this;Object(o.a)(this,t),this.titleTimeouts=void 0,this.apolloClient=void 0,this.convertServerCard=function(t){return{id:t.id,title:t.title,status:l.getInstance().getStatusByValue(t.status),owner:t.owner,creator:t.creator,date:t.date}},this.getCards=function(t){return n.apolloClient.query({query:Object(b.gql)(y())}).then((function(e){return t(e.data.cards.map((function(t){return n.convertServerCard(t)}))),!0})).catch((function(t){return!1}))},this.addCard=function(t,e){return n.apolloClient.mutate({variables:{status:e.value},mutation:Object(b.gql)(U())}).then((function(e){return t(n.convertServerCard(e.data.addCard))})).catch((function(t){return console.log("Error: "+t)}))},this.update=function(t,e){return n.apolloClient.mutate({variables:{id:t,card:e},mutation:Object(b.gql)(w())}).then((function(t){})).catch((function(t){return console.log("Error: "+t)}))},this.updateStatus=function(t,e,a){return t(e,a),n.update(e,{status:a.value})},this.updateOwner=function(t,e,a){var r=a?a.value:null;return t(e,r),n.update(e,{owner:r})},this.updateTitle=function(t,e,a,r){var c=n.titleTimeouts.filter((function(t){return t.id===e}))[0],u=function(){return setTimeout((function(){return n.titleTimeouts=n.titleTimeouts.filter((function(t){return!(t.id===e)})),n.update(e,{title:r})}),2e3)};if(c)clearTimeout(c.timeout),c.timeout=u();else{var i={id:e,oldTitle:a,timeout:u()};n.titleTimeouts=[i].concat(Object(v.a)(n.titleTimeouts))}t(e,r)},this.deleteCard=function(t,e){return n.apolloClient.mutate({variables:{id:e},mutation:Object(b.gql)(T())}).then((function(){return t(e)})).catch((function(t){return console.log(t)}))},this.apolloClient=e,this.titleTimeouts=[]};function I(){var t=Object(x.a)(["\n          mutation DeleteUser($id: ID) {\n            deleteUser(id: $id)\n          }"]);return I=function(){return t},t}function N(){var t=Object(x.a)(["\n        mutation AddUser($name: String) {\n          addUser(name: $name) {\n            id\n            name\n          }\n        }"]);return N=function(){return t},t}function k(){var t=Object(x.a)(["{\n          users {\n            name\n            id\n          }\n        }"]);return k=function(){return t},t}S.instance=void 0,S.getInstance=function(t){return!S.instance&&t&&(S.instance=new S(t)),S.instance};var q=function(t){return t.map((function(t){return{value:t.name,label:t.name,id:t.id}}))},$=function t(e){var n=this;Object(o.a)(this,t),this.apolloClient=void 0,this.getUsers=function(t){return n.apolloClient.query({query:Object(b.gql)(k())}).then((function(e){return t(q(e.data.users))})).catch((function(t){return console.log(t)}))},this.addUser=function(t,e){return n.apolloClient.mutate({variables:{name:e},mutation:Object(b.gql)(N())}).then((function(e){return t(q([e.data.addUser]))})).catch((function(t){return console.log(t)}))},this.deleteUser=function(t,e){return e?n.apolloClient.mutate({variables:{id:e},mutation:Object(b.gql)(I())}).then((function(n){return t(e)})).catch((function(t){return console.log(t)})):null},this.apolloClient=e};$.instance=void 0,$.getInstance=function(t){return!$.instance&&t&&($.instance=new $(t)),$.instance};n(83);var D=n(34),A=function(){var t=C(),e=Object(f.a)(t,2),n=e[0],c=e[1],u=c.addUser,i=c.deleteUser,o=Object(r.useState)(),s=Object(f.a)(o,2),l=s[0],d=s[1],b=Object(r.useState)(),j=Object(f.a)(b,2),v=j[0],O=j[1];return Object(a.jsxs)("header",{className:"boardHeader",children:[Object(a.jsx)("input",{placeholder:"New Username",value:l,onChange:function(t){return d(t.currentTarget.value)}}),Object(a.jsx)("button",{onClick:function(){l&&$.getInstance().addUser(u,l),d("")},children:"Add User"}),Object(a.jsx)(D.a,{className:"deleteUser",options:n,value:v,placeholder:"Pick User",isClearable:!0,onChange:function(t){return O(t)}}),Object(a.jsx)("button",{onClick:function(){return $.getInstance().deleteUser(i,v?v.id:"")},children:"Delete User"})]})},B=(n(103),n(104),n(67));var E=function(t){return"string"!==typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)},F=function(t){var e=g(),n=Object(f.a)(e,2),c=(n[0],n[1]),u=c.setStatus,i=c.setOwner,o=c.setTitle,s=c.deleteCard,d=C(),b=Object(f.a)(d,1)[0],j=Object(r.useState)(!1),v=Object(f.a)(j,2),O=v[0],h=v[1],m=Object(r.useState)(!1),p=Object(f.a)(m,2),x=p[0],T=p[1],w=function(){return h(!O)},U=S.getInstance();return Object(a.jsxs)("div",{className:"card ".concat(x?"deletePending":""),children:[Object(a.jsxs)("header",{children:[Object(a.jsx)(D.a,{className:"selectOwner",options:b,value:{value:t.model.owner,label:E(t.model.owner),id:t.model.id},placeholder:"Owner",isClearable:!0,onChange:function(e){return U.updateOwner(i,t.model.id,e)}}),Object(a.jsx)(D.a,{className:"selectStatus",options:l.getInstance().statusTypes,value:t.model.status,placeholder:"Status",onChange:function(e){return U.updateStatus(u,t.model.id,e)}})]}),Object(a.jsxs)("main",{children:[!O&&Object(a.jsx)("div",{onClick:w,children:t.model.title}),O&&Object(a.jsx)(B.a,{placeholder:"Enter Title",autoFocus:!0,value:t.model.title,onChange:function(e){return U.updateTitle(o,t.model.id,t.model.title,e.currentTarget.value)},onBlur:w})]}),Object(a.jsx)("button",{className:"deleteButton",onClick:function(){T(!0),U.deleteCard(s,t.model.id).catch((function(t){return console.log(t)})).finally((function(){return T(!1)}))},children:"X"})]})},P=function(t){var e=g(),n=Object(f.a)(e,2),r=n[0],c=n[1].addCard;return Object(a.jsxs)("div",{className:"column",children:[Object(a.jsxs)("header",{className:"columnHeader",children:[t.status.label,Object(a.jsx)("button",{onClick:function(){return S.getInstance().addCard(c,t.status)},children:"+"})]}),Object(a.jsx)("main",{className:"columnMain",children:r.filter((function(e){return e.status.value===t.status.value})).map((function(t){return Object(a.jsx)(F,{model:t},t.id)}))})]})},M=function(){var t=function(){var t=g(),e=Object(f.a)(t,2),n=(e[0],e[1].addCards),a=C(),c=Object(f.a)(a,2),u=(c[0],c[1].addUsers),i=Object(r.useState)({loading:!0}),o=Object(f.a)(i,2),s=o[0],l=o[1];return Object(r.useEffect)((function(){S.getInstance(j).getCards(n).then((function(){return l(Object(d.a)(Object(d.a)({},s),{},{loading:!1}))})),$.getInstance(j).getUsers(u)}),[]),s}(),e=l.getInstance().statusTypes.map((function(t){return Object(a.jsx)(P,{status:t},t.label)}));return Object(a.jsxs)("div",{className:"board",children:[Object(a.jsx)(A,{}),Object(a.jsx)("main",{className:"boardmain",children:t.loading?"Loading":e})]})};var L=function(){return Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(M,{})})})},H=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,107)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,u=e.getTTFB;n(t),a(t),r(t),c(t),u(t)}))};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(L,{})}),document.getElementById("root")),H()},73:function(t,e,n){},74:function(t,e,n){},75:function(t,e,n){},83:function(t,e,n){}},[[105,1,2]]]);
//# sourceMappingURL=main.c95feebe.chunk.js.map