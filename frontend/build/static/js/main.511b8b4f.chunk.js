(this.webpackJsonpboard=this.webpackJsonpboard||[]).push([[0],{35:function(t,e,n){},36:function(t,e,n){},37:function(t,e,n){},55:function(t,e,n){},75:function(t,e,n){},76:function(t,e,n){},77:function(t,e,n){"use strict";n.r(e);var r=n(2),a=n(0),c=n.n(a),u=n(8),i=n.n(u),o=(n(35),n(36),n(4)),s=(n(37),n(6)),l=n(5),d=n(12),f=n(27);function j(){var t=[],e=function(){var e,n=Object(f.a)(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;r.apply(void 0,arguments)}}catch(a){n.e(a)}finally{n.f()}};return e.add=function(e){t=[].concat(Object(l.a)(t),[e])},e.remove=function(e){t=t.filter((function(t){return t!==e}))},e}function b(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=t,c=j(),u=Object.keys(e).reduce((function(t,a){return Object(s.a)(Object(s.a)({},t),{},Object(d.a)({},a,(function(){for(var t=arguments.length,u=new Array(t),i=0;i<t;i++)u[i]=arguments[i];var o=e[a].apply(e,[r].concat(u));r!==o&&(r=o,c(o),n&&n(o))})))}),{});return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=Object(a.useState)(t?t(r):r),i=Object(o.a)(n,2),s=i[0],l=i[1];return Object(a.useEffect)((function(){var n=function(n){var r=t?t(n):n;r!==s&&(l(r),e&&e(r))};return c.add(n),function(){c.remove(n)}}),[s]),[s,u]}}var h=b([],{deleteCard:function(t,e){return t.filter((function(t){return t.id!==e}))},addCard:function(t,e){return[e].concat(Object(l.a)(t))},addCards:function(t,e){return[].concat(Object(l.a)(e),Object(l.a)(t))},setStatus:function(t,e,n){return t.map((function(t){return t.id===e?Object(s.a)(Object(s.a)({},t),{},{status:n}):t}))},setTitle:function(t,e,n){return t.map((function(t){return t.id===e?Object(s.a)(Object(s.a)({},t),{},{title:n}):t}))},setOwner:function(t,e,n){return t.map((function(t){return t.id===e?Object(s.a)(Object(s.a)({},t),{},{owner:n}):t}))}}),v=b([],{addUser:function(t,e){return[e].concat(Object(l.a)(t))},addUsers:function(t,e){return[].concat(Object(l.a)(e),Object(l.a)(t))},deleteUser:function(t,e){return t.filter((function(t){return t.id!==e}))}}),O=n(13),p=n(7),m=n.n(p),g=n(28),C=function(){function t(){var e=this;Object(O.a)(this,t),this.statusTypes=void 0,this.getStatusByValue=function(t){return e.statusTypes.filter((function(e){return e.value===t}))[0]},this.statusTypes=[{value:"backlog",label:"Backlog"},{value:"todo",label:"To Do"},{value:"inprogress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"won't fix",label:"Won't Fix"}]}return Object(g.a)(t,null,[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),t}();C.instance=void 0;var x=function t(e){var n=this;Object(O.a)(this,t),this.dispatcher=void 0,this.titleTimeouts=void 0,this.convertServerCard=function(t){return{id:t._id,title:t.title,status:C.getInstance().getStatusByValue(t.status),owner:t.owner,creator:t.creator,date:t.date}},this.getCards=function(){m.a.get("/cards").then((function(t){return n.dispatcher.addCards(t.data.map((function(t){return n.convertServerCard(t)})))})).catch((function(t){return console.log(t)}))},this.addCard=function(t){return m.a.post("/cards/add",{status:t.value}).then((function(t){return n.dispatcher.addCard(n.convertServerCard(t.data))})).catch((function(t){return console.log(t)}))},this.update=function(t,e){return m.a.post("/cards/update/"+t,e).then((function(t){return console.log(t)})).catch((function(t){return console.log(t)}))},this.updateStatus=function(t,e){return n.dispatcher.setStatus(t,e),n.update(t,{status:e.value})},this.updateOwner=function(t,e){var r=e?e.value:null;return n.dispatcher.setOwner(t,r),n.update(t,{owner:r})},this.updateTitle=function(t,e,r){var a=n.titleTimeouts.filter((function(e){return e.id===t}))[0],c=function(){return setTimeout((function(){return n.titleTimeouts=n.titleTimeouts.filter((function(e){return!(e.id===t)})),n.update(t,{title:r})}),2e3)};if(a)clearTimeout(a.timeout),a.timeout=c();else{var u={id:t,oldTitle:e,timeout:c()};n.titleTimeouts=[u].concat(Object(l.a)(n.titleTimeouts))}n.dispatcher.setTitle(t,r)},this.deleteCard=function(t){return m.a.delete("/cards/"+t).then((function(){return n.dispatcher.deleteCard(t)})).catch((function(t){return console.log(t)}))},this.dispatcher=e,this.titleTimeouts=[]},S=function(t){return t.map((function(t){return{value:t.name,label:t.name,id:t._id}}))},T={getUsers:function(t){return m.a.get("/users").then((function(e){return t(S(e.data))})).catch((function(t){return console.log(t)}))},addUser:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){return m.a.post("/users/add",{name:e}).then((function(e){return t(S([e.data]))})).catch((function(t){console.log(t)}))})),deleteUser:function(t){function e(e,n){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){return e?m.a.delete("/users/"+e).then((function(n){return t(e)})).catch((function(t){console.log(t)})):null}))},w=(n(55),n(11)),y=function(){var t=v(),e=Object(o.a)(t,2),n=e[0],c=e[1],u=c.addUser,i=c.deleteUser,s=Object(a.useState)(),l=Object(o.a)(s,2),d=l[0],f=l[1],j=Object(a.useState)(),b=Object(o.a)(j,2),h=b[0],O=b[1];return Object(r.jsxs)("header",{className:"boardHeader",children:[Object(r.jsx)("input",{placeholder:"New Username",value:d,onChange:function(t){return f(t.currentTarget.value)}}),Object(r.jsx)("button",{onClick:function(){d&&T.addUser(u,d),f("")},children:"Add User"}),Object(r.jsx)(w.a,{className:"deleteUser",options:n,value:h,placeholder:"Pick User",isClearable:!0,onChange:function(t){return O(t)}}),Object(r.jsx)("button",{onClick:function(){return T.deleteUser(i,h?h.id:"")},children:"Delete User"})]})},U=(n(75),n(76),n(29));var N,k=function(t){return"string"!==typeof t?"":t.charAt(0).toUpperCase()+t.slice(1)},B=function(t){var e=Object(a.useState)(!1),n=Object(o.a)(e,2),c=n[0],u=n[1],i=Object(a.useState)(!1),s=Object(o.a)(i,2),l=s[0],d=s[1],f=function(){return u(!c)},j=t.cardService;return Object(r.jsxs)("div",{className:"card ".concat(l?"deletePending":""),children:[Object(r.jsxs)("header",{children:[Object(r.jsx)(w.a,{className:"selectOwner",options:t.users,value:{value:t.model.owner,label:k(t.model.owner)},placeholder:"Owner",isClearable:!0,onChange:function(e){return j.updateOwner(t.model.id,e)}}),Object(r.jsx)(w.a,{className:"selectStatus",options:C.getInstance().statusTypes,value:t.model.status,placeholder:"Status",onChange:function(e){return j.updateStatus(t.model.id,e)}})]}),Object(r.jsxs)("main",{children:[!c&&Object(r.jsx)("div",{onClick:f,children:t.model.title}),c&&Object(r.jsx)(U.a,{placeholder:"Enter Title",autoFocus:!0,value:t.model.title,onChange:function(e){return j.updateTitle(t.model.id,t.model.title,e.currentTarget.value)},onBlur:f})]}),Object(r.jsx)("button",{className:"deleteButton",onClick:function(){d(!0),j.deleteCard(t.model.id).catch((function(t){return console.log(t)})).finally((function(){return d(!1)}))},children:"X"})]})},I=function(t){return Object(r.jsxs)("div",{className:"column",children:[Object(r.jsxs)("header",{className:"columnHeader",children:[t.status.label,Object(r.jsx)("button",{onClick:function(){return t.cardService.addCard(t.status)},children:"+"})]}),Object(r.jsx)("main",{className:"columnMain",children:t.cards.filter((function(e){return e.status.value===t.status.value})).map((function(e){return Object(r.jsx)(B,{model:e,cardService:t.cardService,users:t.users},e.id)}))})]})},F=function(){var t=h(),e=Object(o.a)(t,2),n=e[0],c=e[1],u=v(),i=Object(o.a)(u,2),s=i[0],l=i[1].addUsers;Object(a.useEffect)((function(){(N=new x(c)).getCards(),T.getUsers(l)}),[]);var d=C.getInstance().statusTypes.map((function(t){return Object(r.jsx)(I,{status:t,users:s,cards:n,cardService:N},t.label)}));return Object(r.jsxs)("div",{className:"board",children:[Object(r.jsx)(y,{}),Object(r.jsx)("main",{className:"boardmain",children:d})]})};var P=function(){return Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)("div",{className:"App",children:Object(r.jsx)(F,{})})})},A=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,c=e.getLCP,u=e.getTTFB;n(t),r(t),a(t),c(t),u(t)}))};i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(P,{})}),document.getElementById("root")),A()}},[[77,1,2]]]);
//# sourceMappingURL=main.511b8b4f.chunk.js.map